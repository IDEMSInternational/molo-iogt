{% load i18n molo_commenting_tags %}
<div class="comment-list__item {% if node.user.is_staff %}staff{% endif %}">
  <h6 class="comment__username">
    {% if node.user_name.lower == 'anonymous' %}
      {{node.user_name}}
    {% else %}
      {% if not node.user.profile.alias %}
        {% trans "Anonymous" %}
      {% else %}
        {{node.user.profile.alias}}
      {% endif %}
    {% endif %}
  </h6>
  {% if node.is_removed %}
  <p class="call-to-action__comment-item call-to-action__comment-item--feedback">{% trans "This comment has been removed by the community. Please read our platform rules." %}</p>
  {% else %}
    <p>{{node.comment}}</p>
    {% if request.user.is_authenticated %}
      {% if node.parent == None %}
          <a href="{% url 'molo-comments-report' node.pk %}?next={% url 'report_response' node.pk %}" class="call-to-action__comment-item call-to-action__comment-item--report">
          {% trans "Report" %}</a>
          {% if request.user|is_in_group:'Expert' and not node.user|is_in_group:'Expert' %}
            <a href="{% url 'molo-comments-reply' node.pk %}" class="call-to-action__comment-item">{% trans "Reply"%}</a>
          {% endif %}
      {% endif %}
      {% else %}
      <a href="{% url 'molo.profiles:auth_login' %}?next={% url 'report_response' node.pk %}" class="call-to-action__comment-item call-to-action__comment-item--report">
        {% trans "Report" %}</a>
      </a>
    {% endif %}
  {% endif %}
</div>

